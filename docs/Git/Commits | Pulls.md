# Работа с ветками, коммитами и Pull Request (ПР)

- [Содержание](#содержание)
- [Основная ветка](#основная-ветка)
- [Работа с задачами](#работа-с-задачами)
- [Версионирование](#версионирование)
  - [В каких случаях использовать Minor и Major?](#в-каких-случаях-использовать-minor-и-major)
- [Формат коммитов](#формат-коммитов)
- [Pull Request (ПР)](#pull-request-пр)


## Основная ветка

В проекте используется основная ветка **stage** для разработки. Эта ветка, как правило, совпадает с веткой **main** для продакшена.

## Работа с задачами

Для начала работы с новой задачей:

1. Перейдите на ветку **stage**.
2. Отделитесь от нее, создав новую ветку. Название ветки не имеет строгих требований, но рекомендуется использовать что-то осмысленное, связанное с задачей (например, `arwo-3`).

## Версионирование

Приложение использует семантическое версионирование с учетом типов изменений:

- `major` — для несовместимых изменений.
- `minor` — для добавления функционала, совместимого с предыдущими версиями.

### В каких случаях использовать Minor и Major?

- **Minor**
  - Обновлен код PHP, который работает сразу после изменения (контроллеры, модели, конфигурации)
  - Внесенные изменения не требуют дополнительных действий (например, запуск миграций)
  - Внесенные изменения работают сразу после их копирования
- **Major**
  - Затронутые изменения требуют определенных действий:
    - Запуск миграций
    - Обновления Composer
    - Перезапуск контейнера, или новый билд образа Docker
    - Для того чтобы получить результат изменения кода, необходимо предварительно сделать еще что либо помимо git pull или копирования проекта
    - И т.д
  - Затронуты запускаемые файлы
    - Миграции
    - Очереди
    - Файлы хранящиеся в кеше
    - И т.д.

## Формат коммитов

Коммиты должны помечаться следующим образом:

```
[minor\major]ARWO-3
```

где:
- `minor/major` — тип изменения (minor, major).
- `ARWO-3` — ID задачи, с которой связан коммит.

Пример:

```
[minor]ARWO-15 // Оптимизация
```

## Pull Request (ПР)
Все изменения должны вноситься через **pull request (ПР)**. Перед созданием ПР обязательно выполните следующие шаги:
1. Убедитесь, что ваш код обновлен.
2. Проверьте, что изменения соответствуют стандартам кодирования проекта (например, отформатированы и не нарушают стиль кода).
3. Проверьте, что код проходит все необходимые тесты.

ПР должен быть создан для слияния изменений в ветку **stage**.
